#!/bin/bash

# Find the process IDs (PIDs) of the Gunicorn workers
worker_pids=$(ps auxf | grep gunicorn | grep -v grep | awk '{print $2}')

# Check if there are any workers running
if [ -z "$worker_pids" ]; then
  echo "No Gunicorn workers found."
  exit 1
fi

# Send a graceful reload signal to each worker
for pid in $worker_pids; do
  echo "Reloading Gunicorn worker: $pid"
  kill -HUP $pid
done

echo "Gunicorn reload completed."

